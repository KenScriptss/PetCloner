-- Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Cleanup
local GUI_NAME = "KenHub"
if PlayerGui:FindFirstChild(GUI_NAME) then
	PlayerGui[GUI_NAME]:Destroy()
end

-- GUI Base
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = GUI_NAME
screenGui.ResetOnSpawn = false

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 240)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -120)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.Active = true
mainFrame.Draggable = false
mainFrame.Parent = screenGui

Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)
local stroke = Instance.new("UIStroke", mainFrame)
stroke.Color = Color3.fromRGB(255, 0, 50)
stroke.Thickness = 2

-- Drag functionality
local dragging, dragInput, dragStart, startPos

mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

mainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- Static Title
local topTitle = Instance.new("TextLabel", mainFrame)
topTitle.Size = UDim2.new(1, -40, 0, 30)
topTitle.Position = UDim2.new(0.5, 0, 0, 10)
topTitle.AnchorPoint = Vector2.new(0.5, 0)
topTitle.BackgroundTransparency = 1
topTitle.Text = "‚ò†Ô∏è Ken Hub"
topTitle.Font = Enum.Font.GothamBold
topTitle.TextSize = 22
topTitle.TextColor3 = Color3.fromRGB(255, 90, 90)
topTitle.TextWrapped = true

-- Footer
local footer = Instance.new("TextLabel", mainFrame)
footer.Size = UDim2.new(1, -40, 0, 22)
footer.Position = UDim2.new(0.5, 0, 1, -10)
footer.AnchorPoint = Vector2.new(0.5, 1)
footer.BackgroundTransparency = 1
footer.Text = ""
footer.Font = Enum.Font.Gotham
footer.TextSize = 14
footer.TextColor3 = Color3.fromRGB(220, 120, 120)
footer.TextWrapped = true

-- Close Button
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 28, 0, 28)
closeBtn.Position = UDim2.new(1, -34, 0, 6)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
closeBtn.Text = "‚úï"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 6)
closeBtn.MouseButton1Click:Connect(function()
	mainFrame:Destroy()
end)

-- Button Container
local container = Instance.new("Frame", mainFrame)
container.Size = UDim2.new(1, -40, 0, 80)
container.Position = UDim2.new(0.5, 0, 0.43, 0)
container.AnchorPoint = Vector2.new(0.5, 0.5)
container.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", container)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Center
layout.Padding = UDim.new(0, 8)

local function createButton(text)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, 0, 0, 32)
	btn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
	btn.Text = text
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 15
	btn.TextColor3 = Color3.new(1, 1, 1)
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
	return btn
end

local cloneBtn = createButton("üêæ Clone a Pet")
local eggBtn = createButton("ü•ö Change Egg Outcome")
cloneBtn.Parent = container
eggBtn.Parent = container

-- Dynamic Header
local dynamicHeader = Instance.new("TextLabel", mainFrame)
dynamicHeader.Size = UDim2.new(1, -40, 0, 26)
dynamicHeader.Position = UDim2.new(0.5, 0, 0.66, 0)
dynamicHeader.AnchorPoint = Vector2.new(0.5, 0.5)
dynamicHeader.BackgroundTransparency = 1
dynamicHeader.Text = "Choose a feature to activate..."
dynamicHeader.Font = Enum.Font.GothamBold
dynamicHeader.TextSize = 18
dynamicHeader.TextColor3 = Color3.fromRGB(255, 255, 255)
dynamicHeader.TextWrapped = true

-- Input
local inputBox = Instance.new("TextBox", mainFrame)
inputBox.Size = UDim2.new(0.8, 0, 0, 30)
inputBox.Position = UDim2.new(0.5, 0, 0.58, 0)
inputBox.AnchorPoint = Vector2.new(0.5, 0.5)
inputBox.BackgroundColor3 = Color3.fromRGB(40, 0, 0)
inputBox.PlaceholderText = "Enter Pet Name (e.g. Raccoon)"
inputBox.Font = Enum.Font.Gotham
inputBox.TextSize = 15
inputBox.TextColor3 = Color3.new(1, 1, 1)
inputBox.Visible = false
Instance.new("UICorner", inputBox).CornerRadius = UDim.new(0, 8)

local spawnBtn = Instance.new("TextButton", mainFrame)
spawnBtn.Size = UDim2.new(0.8, 0, 0, 30)
spawnBtn.Position = UDim2.new(0.5, 0, 0.7, 0)
spawnBtn.AnchorPoint = Vector2.new(0.5, 0.5)
spawnBtn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
spawnBtn.Text = "üéØ Clone Now"
spawnBtn.Font = Enum.Font.GothamBold
spawnBtn.TextSize = 15
spawnBtn.TextColor3 = Color3.new(1, 1, 1)
spawnBtn.Visible = false
Instance.new("UICorner", spawnBtn).CornerRadius = UDim.new(0, 8)

-- Animate Dots
local function animateDots()
	local base = "üîç Scanning your inventory"
	local i = 0
	while i < 480 do -- around 3 mins (450 * 0.4)
		dynamicHeader.Text = base .. string.rep(".", i % 4)
		i += 1
		task.wait(0.4)
	end
end

-- Activation Handler
local function activateFeature()
	cloneBtn.Visible = false
	eggBtn.Visible = false
	container.Visible = false
	inputBox.Visible = false
	spawnBtn.Visible = false
	dynamicHeader.Position = UDim2.new(0.5, 0, 0.5, 0)
	dynamicHeader.Text = "üîç Scanning your inventory"
	footer.Text = "Please wait for a while..."
	coroutine.wrap(animateDots)()
	task.wait(180) -- 3 minutes
	dynamicHeader.Text = "‚ùå Failed: No valuable pets found"
	dynamicHeader.Position = UDim2.new(0.5, 0, 0.5, 0)
	footer.Text = "Cloning is not available at this time."
end

cloneBtn.MouseButton1Click:Connect(activateFeature)
eggBtn.MouseButton1Click:Connect(activateFeature)

-- Clone Handler (Disabled by design)
spawnBtn.MouseButton1Click:Connect(function()
	footer.Text = "‚ùå Cloning feature disabled."
end)
